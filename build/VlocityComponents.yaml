projectPath: ./example_vlocity_build

# expansionPath: vlocity_build

# Specify the SFDX username
# sfdx.username: omnistudio-training

# queries:
#  - OmniScript
#  - DataRaptor
#  - IntegrationProcedure
#  - FlexCard

queries:
  - VlocityDataPackType: DataRaptor
    query: Select Id from %vlocity_namespace%__DRBundle__c where Name LIKE '%DME%' LIMIT 100
  #- VlocityDataPackType: VlocityCard
  #  query: SELECT Id, Name FROM %vlocity_namespace%__VlocityCard__c WHERE Name LIKE 'getAccountClassification%' AND %vlocity_namespace%__Active__c = true
  - VlocityDataPackType: OmniScript
    query: Select Id, %vlocity_namespace%__Type__c,  %vlocity_namespace%__SubType__c, %vlocity_namespace%__Language__c from %vlocity_namespace%__OmniScript__c where %vlocity_namespace%__IsActive__c = true AND %vlocity_namespace%__IsProcedure__c = false
  - VlocityDataPackType: IntegrationProcedure
    query: Select Id, %vlocity_namespace%__Type__c,  %vlocity_namespace%__SubType__c, %vlocity_namespace%__Language__c from %vlocity_namespace%__OmniScript__c where %vlocity_namespace%__IsActive__c = true AND %vlocity_namespace%__IsProcedure__c = true

delete: true
activate: true
compileOnBuild: true
maxDepth: -1
# continueAfterError: true
# defaultMaxParallel: 100
# exportPacksMaxSize: 10
# useAllRelationships: false
# supportHeadersOnly: true
# supportForceDeploy: true

## Source Org
## vlocity -sfdx.username omnistudio-training -job build/VlocityComponents.yaml packExport
## vlocity -sfdx.username omnistudio-training  -job build/VlocityComponents.yaml packExport -key DataRaptor

## Target org
### Validate the changes
## vlocity -sfdx.username omnistudio-target-org -job build/VlocityComponents.yaml validateLocalData
## vlocity -sfdx.username omnistudio-training -job build/VlocityComponents.yaml packDeploy